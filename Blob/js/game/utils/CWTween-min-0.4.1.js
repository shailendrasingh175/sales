/*!
 * CWTween.js
 * VERSION: 0.9.0
 * DATE: 2013-02-28
 * Javascript library provides a animation to TGE objects
 * @license Copyright (c) 20012-2013, Codewalla. All rights reserved.
 * @author: Ganpat Salve, ganpat.s@codewalla.com
 */
var CWTween={mTweenObjects:[],mPlaying:false,mPauseTime:0,pause:function(e){if(e){if(this.mPauseTime==0){this.mPauseTime=Date.now()}}else{if(this.mPauseTime!=0){var t=Date.now()-this.mPauseTime;for(var n in this.mTweenObjects){this.mTweenObjects[n]._startTime+=t}this.mPauseTime=0;if(!this.mPlaying){requestAnimationFrame(this.updateFunction.bind(this))}}}},removeAll:function(){var e=this.mTweenObjects.length;for(var t=0;t<e;t++){this.mTweenObjects.splice(t,1);t--}},remove:function(e){var t=this.mTweenObjects.length;for(var n=0;n<t;n++){if(this.mTweenObjects[n]._targetObj==e){this.mTweenObjects.splice(n,1);return}}},AddAnimationSequence:function(e,t,n,r,i){var s=this.mTweenObjects.length;for(var o=0;o<s;o++){if(this.mTweenObjects[o]._targetObj==e){if(!this.mTweenObjects[o].hasOwnProperty("mSequenceArr")){this.mTweenObjects[o].mSequenceArr=[];this.mTweenObjects[o].mSequenceArr.push({duration:t,animData:n,properties:r,isFrom:i})}else{this.mTweenObjects[o].mSequenceArr.push({duration:t,animData:n,properties:r,isFrom:i})}return}}this.CreateTweenObjectData({},e,t,n,r,i)},to:function(e,t,n,r){if(r&&r.timeline){this.AddAnimationSequence(e,t,n,r,false)}else{this.remove(e);this.CreateTweenObjectData({},e,t,n,r,false)}if(!this.mPlaying&&this.mPauseTime===0){requestAnimationFrame(this.updateFunction.bind(this));this.mPlaying=true}},from:function(e,t,n,r){if(r&&r.timeline){this.AddAnimationSequence(e,t,n,r,true)}else{this.remove(e);this.CreateTweenObjectData({},e,t,n,r,true)}if(!this.mPlaying&&this.mPauseTime===0){requestAnimationFrame(this.updateFunction.bind(this));this.mPlaying=true}},CreateTweenObjectData:function(e,t,n,r,i,s,o){e._targetObj=t;e._duration=n*1e3;e._startTime=Date.now();e._Data={};if(!s)for(var u in r){if(r[u]===null){continue}e._Data[u]=[t[u],r[u]]}else for(var u in r){if(r[u]===null){continue}e._Data[u]=[r[u],t[u]];t[u]=r[u]}if(i){if(i.hasOwnProperty("onComplete")){e._callback=i.onComplete}if(i.hasOwnProperty("ease")){e._easeFunction=CWTween.Easing[i.ease.name][i.ease.hasOwnProperty("type")?i.ease.type:"In"];e._easeParam=this.ParseEasingValues(i.ease)}if(i.hasOwnProperty("delay")){e._delay=i.delay*1e3}if(i.hasOwnProperty("reverse")){e._reverse=i.reverse}}if(!o){this.mTweenObjects.push(e)}},updateFunction:function(){if(this.mTweenObjects.length>0&&this.mPauseTime==0){requestAnimationFrame(this.updateFunction.bind(this));var e=Date.now();var t,n,r;for(var i=0;i<this.mTweenObjects.length;i++){n=this.mTweenObjects[i];if(n._targetObj.markedForRemoval()==true){this.mTweenObjects.splice(i,1)}else{if(n.hasOwnProperty("_delay")){t=(e-n._startTime)/n._delay;if(t>1){delete n["_delay"];n._startTime=Date.now()}}else{t=(e-n._startTime)/n._duration;if(t>1){r=t=1}else{if(n.hasOwnProperty("_easeFunction")){r=n._easeFunction(t,n._easeParam)}else{r=t}}for(var s in n._Data){n._targetObj[s]=Math.round((n._Data[s][0]+(n._Data[s][1]-n._Data[s][0])*r)*100)/100}if(t==1){if(n.hasOwnProperty("_reverse")){var o;if(n._reverse===true){for(var s in n._Data){o=n._Data[s][0];n._Data[s][0]=n._Data[s][1];n._Data[s][1]=o}n._startTime=Date.now()}else if(n._reverse<=0){delete n["_reverse"]}else{n._reverse--;for(var s in n._Data){o=n._Data[s][0];n._Data[s][0]=n._Data[s][1];n._Data[s][1]=o}n._startTime=Date.now()}}else{if(n.hasOwnProperty("mSequenceArr")){var u=n.mSequenceArr.length;if(u==0){this.mTweenObjects.splice(i,1);i--;if(n.hasOwnProperty("_callback")){n._callback()}}else{this.RemoveObjectProperty(n);var a=n.mSequenceArr[0];this.CreateTweenObjectData(n,n._targetObj,a.duration,a.animData,a.properties,a.isFrom,true);n.mSequenceArr.splice(0,1)}}else{this.mTweenObjects.splice(i,1);i--;if(n.hasOwnProperty("_callback")){n._callback()}}}}}}}}else{this.mPlaying=false}},RemoveObjectProperty:function(e){if(e.hasOwnProperty("_callback")){e._callback();delete e["_callback"]}if(e.hasOwnProperty("ease")){delete e["ease"]}if(e.hasOwnProperty("delay")){delete e["delay"]}if(e.hasOwnProperty("reverse")){delete e["reverse"]}},ParseEasingValues:function(e){var t;switch(e.name){case"Back":t=e.hasOwnProperty("params")?e.params:1.70158;break;case"Elastic":t=e.hasOwnProperty("params")?e.params:1;break;default:t=0;break}return t}};CWTween.Easing={Back:{In:function(e,t){return e*e*((t+1)*e-t)},Out:function(e,t){return(e=e-1)*e*((t+1)*e+t)+1},InOut:function(e,t){var n=t*1.525;return(e*=2)<1?.5*e*e*((n+1)*e-n):.5*((e-=2)*e*((n+1)*e+n)+2)}},Bounce:{In:function(e){return 1-CWTween.Easing.Bounce.Out(1-e)},Out:function(e){if(e<1/2.75){return 7.5625*e*e}else{if(e<2/2.75){return 7.5625*(e-=1.5/2.75)*e+.75}else{if(e<2.5/2.75){return 7.5625*(e-=2.25/2.75)*e+.9375}else{return 7.5625*(e-=2.625/2.75)*e+.984375}}}},InOut:function(e){return e<.5?CWTween.Easing.Bounce.In(e*2)*.5:CWTween.Easing.Bounce.Out(e*2-1)*.5+.5}},Elastic:{In:function(e,t){return-(t*Math.pow(2,10*(e-=1))*Math.sin((e-.3/(2*Math.PI)*(Math.asin(1/t)||0))*2*Math.PI/.3))},Out:function(e,t){return t*Math.pow(2,-10*e)*Math.sin((e-.3/(2*Math.PI)*(Math.asin(1/t)||0))*2*Math.PI/.3)+1},InOut:function(e,t){var n=.3/(2*Math.PI)*(Math.asin(1/t)||0);var r=2*Math.PI;return(e*=2)<1?-.5*t*Math.pow(2,10*(e-=1))*Math.sin((e-n)*r/.45):t*Math.pow(2,-10*(e-=1))*Math.sin((e-n)*r/.45)*.5+1}},Expo:{In:function(e){return Math.pow(2,10*(e-1))-.001},Out:function(e){return 1-Math.pow(2,-10*e)},InOut:function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}},Sine:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Circ:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}};